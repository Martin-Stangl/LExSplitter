{% extends 'TheBlackLionLExSplitterBundle::base.html.twig' %}

{% set ng_page = 'addPayment' %}

{% block body %}
    <h1>payment.bill.date = {% verbatim %}{{ payment.bill.date }}{% endverbatim %} </h1>
    <form action="#">

        {# Selection of person which did the payment #}
        <div class="row">
            <div class="col-xs-12">
                <div class="form-group">
                    <label for="payment.payer.personId">Payment by</label>
                    <div class="btn-group btn-group-justified" ng-init="payment.payer.personId = 1">
                        <label class="btn btn-primary" ng-model="payment.payer.personId" btn-radio="1">Martin</label>
                        <label class="btn btn-primary" ng-model="payment.payer.personId" btn-radio="2">Nico</label>
                        <input type="hidden" name="payment.payer.personId"
                               value='{% verbatim %}{{ payment.payer.personId }}{% endverbatim %}'>
                    </div>
                </div>
            </div>
        </div>
        {# Select/enter what was paid #}
        <div class="row">
            <div class="col-xs-12">
                <div class="form-group">
                    <label for="payment.bill.description" id="paidWhatLabel">What was paid?</label>
                    <input type="text" ng-model="payment.bill.description" name="payment.bill.description"
                           ng-init="payment.bill.description = 'Spar'; descriptions = ['Billa', 'Putzfrau', 'Spar',
                           'Mittagessen', 'Resch&Frisch', 'Merkur', 'Strom']"
                           typeahead="description for description in descriptions | filter:$viewValue | limitTo:8"
                           typeahead-focus-first="false"
                           class="form-control" app-on-focus-scroll-to="#paidWhatLabel" autocomplete="off">
                </div>
            </div>
        </div>

        <div class="row">
            {# Enter payment date #}
            <div class="col-xs-6">
                <div class="form-group">
                    <label for="amount">Date</label>
                    <input type="date" ng-model="payment.bill.date" name="payment.bill.date"
                           ng-init="payment.bill.date = '2015-01-05'" class="form-control" aria-label="Date">
                </div>
            </div>

            {# Enter paid amount #}
            <div class="col-xs-6">
                <div class="form-group">
                    <label for="payment.bill.amount">Amount</label>
                    <div class="input-group">
                        <span class="input-group-addon">EUR</span>
                        <input type="number" ng-model="payment.bill.amount" name="payment.bill.amount"
                               class="form-control" aria-label="Amount" step="0.01" required
                                ng-init="payment.bill.amount = 22.70">
                    </div>
                </div>
            </div>
        </div>

        {# Define split #}
        <div class="row">
            <div class="col-xs-12">
                <div class="form-group">
                    <label for="split" id="splitLabel">How to split?</label>

                    <div class="form-group">
                        <div class="btn-group btn-group-justified" data-toggle="buttons">
                            <label class="btn btn-primary active" data-ng-click="payment.split.method = 'equal'; toggleSplitMethodForm(payment.split.method);">
                                <input type="radio" data-ng-model="payment.split.method" name="payment.split.method" id="splitMethod1" autocomplete="off" value="equal" checked>Equal
                            </label>
                            <label class="btn btn-primary" data-ng-click="payment.split.method = 'other'; toggleSplitMethodForm(payment.split.method);" aria-expanded="false" aria-controls="otherSplitFields">
                                <input type="radio" data-ng-model="payment.split.method" name="payment.split.method" id="splitMethod2" autocomplete="off" value="other">Other
                            </label>
                        </div>
                        Value: {% verbatim %}{{payment.split.method  }}{%  endverbatim %}

                        <div class="collapse" id="otherSplitFields">
                            <div class="well">
                                <table class="table">
                                    <tbody>
                                    <tr>
                                        <td colspan="2" style="border-top: none">
                                            <div class="row">
                                                <div class="col-xs-2">
                                                </div>
                                                <div class="col-xs-8">
                                                    <div class="btn-group btn-block" data-toggle="buttons">
                                                        <label class="btn btn-default btn-block">
                                                            <input type="checkbox" autocomplete="off" id="fullyAssigned1">Martin
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2">
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border-top: none">
                                            <div class="input-group">
                                                <input type="number" class="form-control" aria-label=Percentage" id="splitPercentage1" min="0" max="100" step="0.01">
                                                <span class="input-group-addon">%</span>
                                            </div>
                                        </td>

                                        <td style="border-top: none">
                                            <div class="input-group">
                                                <span class="input-group-addon">EUR</span>
                                                <input type="number" class="form-control" aria-label="Amount" name="splitAmount1" id="splitAmount1" step="0.0001">
                                            </div>
                                        </td>
                                    </tr>
                                    <input type="hidden" id="fixedParameter1" name="fixedParameter1">

                                    <tr>
                                        <td colspan="2">
                                            <div class="row">
                                                <div class="col-xs-2">
                                                </div>
                                                <div class="col-xs-8">
                                                    <div class="btn-group btn-block" data-toggle="buttons">
                                                        <label class="btn btn-default btn-block">
                                                            <input type="checkbox" autocomplete="off" id="fullyAssigned2">Nico
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2">
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border-top: none">
                                            <div class="input-group">
                                                <input type="number" class="form-control" aria-label=Percentage" id="splitPercentage2" min="0" max="100" step="0.01">
                                                <span class="input-group-addon">%</span>
                                            </div>
                                        </td>

                                        <td style="border-top: none">
                                            <div class="input-group">
                                                <span class="input-group-addon">EUR</span>
                                                <input type="number" class="form-control" aria-label="Amount" name="splitAmount2" id="splitAmount2" step="0.0001">
                                            </div>
                                        </td>
                                    </tr>
                                    <input type="hidden" id="fixedParameter2" name="fixedParameter2">
                                    </tbody>
                                </table>
                                <div class="row">
                                    <div class="col-xs-6">
                                    </div>
                                    <div class="col-xs-6">
                                        <button type="button" class="btn btn-warning btn-block" id="clearButton">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>

        {# Submit data button #}
        <div class="row">
            <div class="col-xs-2">
            </div>
            <div class="col-xs-8">

                <br/>
                <button type="submit" class="btn btn-success btn-lg btn-block">Save Payment</button>
                <br/>

            </div>
            <div class="col-xs-2">
            </div>
        </div>

    </form>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {# Page specific javascript #}
    {% if ng_page is defined %}
        {% javascripts
            "@TheBlackLionLExSplitterBundle/Resources/public/js/addpayment/*-module.js"
            "@TheBlackLionLExSplitterBundle/Resources/public/js/addpayment/*-[!m]*.js"
            output="js/addpayment.js"
        %}
            <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% endif %}
{% endblock %}